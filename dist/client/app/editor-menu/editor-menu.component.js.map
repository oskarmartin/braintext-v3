{"version":3,"sources":["app/editor-menu/editor-menu.component.ts"],"names":[],"mappings":"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","file":"editor-menu.component.js","sourcesContent":["import { Component, Inject, HostListener, HostBinding } from '@angular/core';\nimport { SentenceService } from '../_services/sentence.service';\nimport { trigger, state, style, transition, animate} from '@angular/animations';\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { ClickService } from \"../_services/click.service\";\nimport { FileService } from '../_services/file.service';\nimport { UserService } from '../_services/user.service';\n\n\n@Component({\n    moduleId: module.id,\n    templateUrl: \"editor-menu.component.html\",\n    styleUrls: ['./editor-menu.component.css'],\n    selector: 'editor-menu',\n    animations: [\n        trigger('archiveMenuSlideInOut', [\n            state('in', style({\n                transform: 'translate3d(100%, 0, 0)'\n            })),\n            state('out', style({\n                transform: 'translate3d(0,0,0)'\n            })),\n            transition('in => out', animate('400ms ease-in-out')),\n            transition('out => in', animate('400ms ease-in-out'))\n        ]),\n        trigger('editorMenu', [\n            state('in', style({\n                marginRight: \"0px\"\n            })),\n            state('out', style({\n                marginRight: '300px'\n            })),\n            transition('in => out', animate('400ms ease-in-out')),\n            transition('out => in', animate('400ms ease-in-out'))\n        ]),\n\n    ]\n})\nexport class EditorMenuComponent{\n    numOfNewSentences: number;\n    newSentence: boolean = false;\n    archiveMenuState: string = \"in\";\n    @HostBinding('@editorMenu') moveEditorMenu = 'in';\n\n    constructor(\n        private sentenceService: SentenceService,\n        private clickService: ClickService,\n        private fileService: FileService,\n        private userService: UserService\n\n    ){\n        this.sentenceService.sentenceNum$.subscribe(value => {\n            console.log(\"uute lausete arv -> \", value)\n            this.numOfNewSentences = value;\n        })\n        this.sentenceService.isNewSenActive$.subscribe(value => {\n            console.log(\"kas new sentence on active -> \", value)\n            this.newSentence = value;\n        })\n        this.clickService.archiveClick$.subscribe(value => {\n            console.log(\"editor menu archive-slider status -> \", value);\n            if(value == false){\n                this.archiveMenuState = 'in';\n                this.moveEditorMenu = \"in\";\n            }else{\n                this.archiveMenuState = 'out';\n                this.moveEditorMenu = \"out\";\n                this.sentenceService.deActivateNewSen();\n            }\n        })\n    }\n    zoomIn(){\n        this.clickService.zoomIn();\n    }\n    zoomOut(){\n        this.clickService.zoomOut();\n    }\n    toggleArchiveMenu(){\n        this.archiveMenuState = this.archiveMenuState === 'out' ? 'in' : 'out';\n    }\n    toggleArchive(){\n        this.clickService.openArchive();\n    }\n    onFileChange(event){\n        if(this.sentenceService.getSentenceStringLength() > 0){\n            this.clickService.openConfirmation();\n        }\n        let files = event.target.files;\n        this.saveFiles(files);\n    }\n    removeLast(){\n        this.clickService.undoLast();\n    }\n    saveFiles(files){\n        console.log(\"saveFile initiated from the editor-menu\");\n        if(files.length > 0){\n            var formData: FormData = new FormData();\n            formData.append(\"file\", files[0], files[0].name);\n\n            var parameters = {\n                userId: JSON.parse(localStorage.getItem('user'))\n            }\n            this.fileService.upload(formData, parameters).subscribe(\n                data => {\n                    console.log(\"file upload from editor-menu\");\n                    console.log(data);\n                    this.fileService.uploadFromSide(data.filename);\n                    var id = JSON.parse(localStorage.getItem('user'));\n                    console.log(\"editor menu user id -> \", id);\n                    console.log(\"editor menu data ->\", data.filename);\n                    this.userService.addUserLastFile(id, data.filename).subscribe(data=>{\n                        console.log(\"add user last file in editor menu\");\n                        console.log(data);\n\n                    });\n                },\n                error => {\n                    console.log(\"there was an error with upload\");\n                }\n            )\n        }\n\n    }\n\n\n}\n"]}